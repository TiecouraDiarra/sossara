<!-- Breadscrumb Section -->
<div class="breadcrumb-bar">
    <div class="container">
        <div class="row align-items-center text-center">
            <div class="col-md-12 col-12">
                <h2 class="breadcrumb-title">Profil</h2>
                <nav aria-label="breadcrumb" class="page-breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a [routerLink]="routes.home9">Accueil</a></li>
                        <li class="breadcrumb-item active" aria-current="page">Profil</li>
                    </ol>
                </nav>
            </div>
        </div>
    </div>
</div>
<!-- /Breadscrumb Section -->

<!-- Profile Content -->
<div class="dashboard-content">
    <div class="container">
        <div class="">
            <ul class="dashborad-menus">
                <li>
                    <a [routerLink]="routes.dashboard">
                        <i class="feather-grid"></i> <span>Dashboard</span>
                    </a>
                </li>
                <li class="active">
                    <a [routerLink]="routes.profile">
                        <i class="fa-solid fa-user"></i> <span>Profil</span>
                    </a>
                </li>
                <li>
                    <a [routerLink]="routes.mylisting">
                        <i class="feather-list"></i> <span>Mes biens</span>
                    </a>
                </li>
                <li *ngIf="isAgence">
                    <a [routerLink]="routes.bookmarks">
                        <i class="fas fa-users"></i> <span>Mes agents</span>
                    </a>
                </li>
                <li>
                    <a [routerLink]="routes.messages">
                        <i class="fa-solid fa-comment-dots"></i> <span>Messages</span>
                    </a>
                </li>
                <li>
                    <a [routerLink]="routes.reviews">
                        <i class="fas fa-bell"></i> <span>Notifications</span>
                    </a>
                </li>
                <!-- <li class="crd">
                    <a (click)="logout()">
                        <i class="fas fa-light fa-circle-arrow-left"></i> <span>Deconnexion</span>
                    </a>
                </li> -->
            </ul>
        </div>
        <div class="profile-content">
            <div class="row dashboard-info">
                <div class="col-lg-9">
                    <div class="card dash-cards">
                        <div class="card-header">
                            <h4>Details du profil</h4>
                        </div>
                        <div class="card-body">
                            <div class="profile-photo">
                                <div class="profile-img">
                                    <div class="settings-upload-img" *ngIf="User.user && User.user.photo">
                                        <img src="{{ generateImageUrl(User.user.photo) }}" alt="profile"
                                            (error)="handleAuthorImageError($event)">
                                    </div>
                                    <div class="settings-upload-btn">
                                        <input type="file" accept="image/*" name="photo" class="hide-input image-upload"
                                            id="photo" (change)="onPhotoChange($event)" accept=".png, .jpeg, .jpg, .svg">
                                        <label for="file" class="file-upload">Changer Photo profil</label>
                                    </div>
                                    <span>Taille Max: 5MB</span>
                                </div>
                                <!-- <a href="javascript:void(0)" class="profile-img-del"><i class="feather-trash-2"></i></a> -->
                            </div>
                            <div class="profile-form">
                                <form>
                                    <div class="form-group" *ngIf="User.user && User.user.username">
                                        <label class="col-form-label">Votre nom et prenom</label>
                                        <div class="pass-group group-img">
                                            <span class="lock-icon"><i class="feather-user"></i></span>
                                            <input type="text" class="form-control" value="{{User.user.username}}">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-6 col-md-6">
                                            <div class="form-group" *ngIf="User.user && User.user.telephone">
                                                <label class="col-form-label">Numero</label>
                                                <div class="pass-group group-img">
                                                    <span class="lock-icon"><i class="feather-phone-call"></i></span>
                                                    <input type="tel" class="form-control"
                                                        value="{{User.user.telephone}}">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-6 col-md-6">
                                            <div class="form-group" *ngIf="User.user && User.user.email">
                                                <label class="col-form-label">Adresse Email</label>
                                                <div class="group-img">
                                                    <i class="feather-mail"></i>
                                                    <input type="text" class="form-control" value="{{User.user.email}}">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row socialmedia-info">
                                        <div class="col-lg-6 col-md-6" *ngIf="User.user.date_de_naissance">
                                            <div class="form-group">
                                                <label class="col-form-label">Date de naissance</label>
                                                <div class="pass-group group-img">
                                                    <span class="lock-icon"><i
                                                            class="fa-sharp fa-solid fa-calendar-days"></i></span>
                                                    <input type="text" class="form-control"
                                                        value="{{User.user.date_de_naissance | date:'dd MMM yyyy':locale}}">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-6 col-md-6" *ngIf="User.user.role && User.user.role[0]">
                                            <div class="form-group">
                                                <label class="col-form-label">Statut</label>
                                                <div class="pass-group group-img">
                                                    <span class="lock-icon"><i class="fas fa-info-circle"></i></span>
                                                    <input type="text" class="form-control" [value]="getRoleLabel()">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row socialmedia-info">
                                        <div class="col-lg-6 col-md-6"
                                            *ngIf="User.user.documents && User.user.documents[0]">
                                            <div class="form-group">
                                                <label class="col-form-label">Type de piece</label>
                                                <div class="pass-group group-img">
                                                    <span class="lock-icon"><i
                                                            class="fas fa-id-card"></i></span>
                                                    <input type="text" class="form-control"
                                                        value="{{User.user.documents[0].nom}}">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-6 col-md-6"
                                            *ngIf="User.user.documents && User.user.documents[0]">
                                            <div class="form-group">
                                                <label class="col-form-label">Numero de la carte</label>
                                                <div class="pass-group group-img">
                                                    <span class="lock-icon"><i class="fas fa-file"></i></span>
                                                    <input type="text" class="form-control"
                                                        value="{{User.user.documents[0].num_doc}}">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- <div class="form-group">
                                        <label class="col-form-label">Notes</label>
                                        <div class="pass-group group-img">
                                            <textarea rows="4" class="form-control">Mauris vestibulum lorem a condimentum vulputate. Integer vitae turpis turpis. Cras at tincidunt urna. Aenean leo justo, congue et felis a, elementum rutrum felis. Fusce rutrum ipsum eu pretium faucibus. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Aenean leo justo, congue et felis a.  Aenean leo justo, congue et felis a.	</textarea>												
                                        </div>
                                    </div> -->
                                    <div class="form-group text-center">
                                        <button class="btn btn-primary" type="submit" data-bs-toggle="modal"
                                            data-bs-target="#staticBackdrop"> Modifier son profil</button>
                                    </div>

                                    <!-- Modal MODIFICATION PROFIL -->
                                    <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static"
                                        data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel"
                                        aria-hidden="true">
                                        <div class="modal-dialog">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h5 class="modal-title" id="staticBackdropLabel">Modification du
                                                        profil</h5>
                                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                                        aria-label="Close"></button>
                                                </div>
                                                <div class="modal-body">
                                                    <form>
                                                        <!-- nom et prenom  -->
                                                        <div class="form-group group-img">
                                                            <div class="group-img" id="datepicker">
                                                                <i class="feather-user"></i>
                                                                <input placeholder="Prenom et Nom" name="nom" type="text"
                                                                    class="form-control" [(ngModel)]="formModif.nom" required />
                                                            </div>
                                                        </div>
                                                        <!-- email  -->
                                                        <div class="form-group group-img">
                                                            <div class="group-img">
                                                                <i class="feather-mail"></i>
                                                                <input type="email" placeholder="Adresse Email" name="email"
                                                                    required class="form-control"
                                                                    [(ngModel)]="formModif.email" />
                                                            </div>
                                                        </div>
                                                        <!-- telephone  -->
                                                        <div class="form-group group-img">
                                                            <div class="group-img">
                                                                <i class="feather-phone"></i>
                                                                <input [(ngModel)]="formModif.telephone" type="text" required
                                                                    name="telephone" class="form-control"
                                                                    placeholder="Numero de Telephone" />
                                                            </div>
                                                        </div>
                                                        <!-- date de naissance  -->
                                                        <div class="form-group group-img">
                                                            <div class="group-img">
                                                                <i class="feather-calendar"></i>
                                                                <!-- Utilisation d'une icône de calendrier pour représenter la date de naissance -->
                                                                <input [(ngModel)]="formModif.dateNaissance" type="date" required
                                                                    name="dateNaissance" class="form-control"
                                                                    placeholder="Date de Naissance" />
                                                            </div>
                                                        </div>
                                                    </form>
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-secondary"
                                                        data-bs-dismiss="modal">Retour</button>
                                                    <button (click)="ModifierProfilUser()" type="button" class="btn btn-primary">Modifier</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </form>

                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3">
                    <div class="profile-sidebar">
                        <div class="card">
                            <div class="card-header">
                                <h6 style="margin-left: auto; margin-right: auto;">Changer Mot de passe</h6>
                            </div>
                            <div class="card-body">
                                <form>
                                    <div class="form-group">
                                        <label class="col-form-label">Ancien mot de passe</label>
                                        <div class="pass-group group-img">
                                            <span class="lock-icon"><i class="feather-lock"></i></span>
                                            <input name="old_password" [(ngModel)]="ChangeMdpForm.old_password"
                                                type="password" class="form-control pass-input"
                                                placeholder="Ancien mot de passe">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-form-label">Nouveau mot de passe</label>
                                        <div class="pass-group group-img">
                                            <span class="lock-icon"><i class="feather-lock"></i></span>
                                            <input name="password" [(ngModel)]="ChangeMdpForm.password" type="password"
                                                [type]="Toggledata ? 'password' : 'text'"
                                                class="form-control pass-input" placeholder="Nouveau mot de passe">

                                            <span
                                                [ngClass]="Toggledata == false ? 'toggle-password feather-eye' : 'toggle-password feather-eye-off'"
                                                (click)="iconLogle()"></span>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-form-label">Confirmer Nouveau MDP</label>
                                        <div class="pass-group group-img">
                                            <span class="lock-icon"><i class="feather-lock"></i></span>
                                            <input name="password" [(ngModel)]="ChangeMdpForm.confirmPassword"
                                                type="password" name="password" [type]="Toggle ? 'password' : 'text'"
                                                class="form-control pass-input" placeholder="Confirmation">
                                            <span
                                                [ngClass]="Toggle == false ? 'toggle-password feather-eye' : 'toggle-password feather-eye-off'"
                                                (click)="icon()"></span>
                                        </div>
                                    </div>
                                    <button class="btn btn-primary"
                                        [disabled]="!ChangeMdpForm.old_password || ChangeMdpForm.old_password.trim() === '' || !ChangeMdpForm.password || ChangeMdpForm.password.trim() === '' || !ChangeMdpForm.confirmPassword || ChangeMdpForm.confirmPassword.trim() === '' "
                                        (click)="ChangerMotDePasse()" type="submit"> Changer mot de passe</button>
                                </form>
                            </div>
                        </div>
                    </div>

                    <div class="profile-sidebar  mt-3">
                        <div class="card">
                            <div class="card-header">
                                <h6 style="margin-left: auto; margin-right: auto;">Reseaux sociaux</h6>
                            </div>
                            <div class="card-body">
                                <form>
                                    <div class="row socialmedia-info">
                                        <div class="form-group">
                                            <label class="col-form-label">Facebook</label>
                                            <div class="pass-group group-img">
                                                <span class="lock-icon"><i class="fab fa-facebook-f"></i></span>
                                                <input type="text" class="form-control"
                                                    value="https://www.facebook.com/">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row socialmedia-info">
                                        <div class="form-group">
                                            <label class="col-form-label">Twitter</label>
                                            <div class="pass-group group-img">
                                                <span class="lock-icon"><i class="fab fa-twitter"></i></span>
                                                <input type="text" class="form-control" value="https://twitter.com/">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row socialmedia-info">
                                        <div class="form-group formlast-input">
                                            <label class="col-form-label">Google+</label>
                                            <div class="pass-group group-img">
                                                <span class="lock-icon"><i
                                                        class="fa-brands fa-google-plus-g"></i></span>
                                                <input type="text" class="form-control" value="https://www.google.com/">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row socialmedia-info">
                                        <div class="form-group formlast-input">
                                            <label class="col-form-label">Instagram</label>
                                            <div class="pass-group group-img">
                                                <span class="lock-icon"><i class="fab fa-instagram"></i></span>
                                                <input type="text" class="form-control"
                                                    value="https://www.instagram.com/">
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- /Profile Content -->