<!-- Breadscrumb Section -->
<div class="breadcrumb-bar">
    <div class="container">
        <div class="row align-items-center text-center">
            <div class="col-md-12 col-12">
                <h2 class="breadcrumb-title">Paiement Orange Money</h2>
                <nav aria-label="breadcrumb" class="page-breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a [routerLink]="routes.home9">Accueil</a></li>
                        <li class="breadcrumb-item active" aria-current="page">Paiment</li>
                    </ol>
                </nav>
            </div>
        </div>
    </div>
</div>
<!-- /Breadscrumb Section -->


<div class="bloglist-section bloggrid-sidebar container d-lg-flex">
    <div class="box-1 bg-light user">
        <div class="d-flex align-items-center mb-3">
            <img src="{{generateImageUrl(bien?.proprietaire?.photo?.nom)}}" (error)="handleAuthorImageError($event)"
                class="pic rounded-circle" alt="">
            <p class="ps-2 name">{{bien?.proprietaire?.nom}}</p>
        </div>
        <div class="box-inner-1 pb-3 mb-3 ">
            <div class="d-flex justify-content-between mb-3 userdetails" style="font-size: 14px;">
                <p class="fw-bold" *ngIf="bien?.periode?.nom === 'Journalier'">Prix journalier</p>
                <p class="fw-bold" *ngIf="bien?.periode?.nom === 'Hebdomadaire'">Prix hebdomendaire</p>
                <p class="fw-bold" *ngIf="bien?.periode?.nom === 'Mensuel' && bien?.statut?.nom === 'A louer'">Prix mensuel</p>
                <p class="fw-bold" *ngIf="bien?.periode?.nom === 'Mensuel' && bien?.statut?.nom === 'A vendre'">Prix du bien</p>
                <p class="fw-lighter">{{formatPrice(bien?.prix)}} <span class="fw-bold">FCFA</span></p>
            </div>
            <div id="my" class="carousel slide carousel-fade img-details" data-bs-ride="carousel"
                data-bs-interval="2000">
                <!-- <div class="carousel-indicators">
                    <button type="button" data-bs-target="#my" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
                    <button type="button" data-bs-target="#my" data-bs-slide-to="1" aria-label="Slide 2"></button>
                    <button type="button" data-bs-target="#my" data-bs-slide-to="2" aria-label="Slide 3"></button>
                </div> -->
                <div class="carousel-inner">
                    <!-- <div *ngFor="let photo of photoImmo; let i = index" class="carousel-item" [class.active]="i === 0">
                        <img src="{{generateImageUrl(photo?.nom)}}" class="d-block w-100">
                    </div> -->
                    <!-- <div class="carousel-item"> <img src="https://images.pexels.com/photos/270694/pexels-photo-270694.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940" class="d-block w-100">
                    </div>
                    <div class="carousel-item"> <img src="https://images.pexels.com/photos/7974/pexels-photo.jpg?auto=compress&cs=tinysrgb&dpr=2&w=500" class="d-block w-100">
                    </div> -->
                    <ng-container *ngIf="photoImmo?.length === 0; else imagesBlock">
                        <div
                          class="carousel-item active"
                          *ngIf="bien.typeImmo.nom === 'Villa'"
                        >
                          <img
                            src="../../../../assets/img/typebien/villa.png"
                            class="img-fluid image-size"
                            alt="default-img"
                          />
                        </div>
                        <div
                          class="carousel-item active"
                          *ngIf="bien.typeImmo.nom === 'Appartement'"
                        >
                          <img
                            src="../../../../assets/img/typebien/appartement.png"
                            class="img-fluid image-size"
                            alt="default-img"
                          />
                        </div>
                        <div
                          class="carousel-item active"
                          *ngIf="bien.typeImmo.nom === 'Terrain'"
                        >
                          <img
                            src="../../../../assets/img/typebien/terrain.png"
                            class="img-fluid image-size"
                            alt="default-img"
                          />
                        </div>
                        <div
                          class="carousel-item active"
                          *ngIf="bien.typeImmo.nom === 'Bureau'"
                        >
                        <img src="../../../../assets/img/typebien/bureau.png" class="img-fluid image-size"
                        alt="default-img">
                        </div>
                        <div
                          class="carousel-item active"
                          *ngIf="bien.typeImmo.nom === 'Champ'"
                        >
                          <img
                            src="../../../../assets/img/typebien/champ.png"
                            class="img-fluid image-size"
                            alt="default-img"
                          />
                        </div>
                        <div
                          class="carousel-item active"
                          *ngIf="bien.typeImmo.nom === 'Commerce & Magasin'"
                        >
                          <img
                            src="../../../../assets/img/typebien/magasin.png"
                            class="img-fluid image-size"
                            alt="default-img"
                          />
                        </div>
                      </ng-container>
                      <ng-template #imagesBlock>
                        <div
                          *ngFor="let photo of photoImmo; let i = index"
                          class="carousel-item"
                          [class.active]="i === 0"
                        >
                          <img
                            [src]="generateImageUrl(photo?.nom)"
                            class="d-block w-100"
                            (error)="setDefaultImage($event)"
                          />
                        </div>
                      </ng-template>
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#my" data-bs-slide="prev">
                    <div class="icon"> <span class="fas fa-arrow-left"></span> </div> <span
                        class="visually-hidden">Precedent</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#my" data-bs-slide="next">
                    <div class="icon"> <span class="fas fa-arrow-right"></span> </div> <span
                        class="visually-hidden">Suivant</span>
                </button>
            </div>
            <p class="dis my-3 info">{{bien?.nom}} </p>
            <p class="dis mb-3 updates" [innerHTML]='bien ? bien?.description : "Aucune description"'></p>
            <p class="dis mb-3 different fw-bold">Les caracteristiques du bien :</p>
            <div class="d-flex flex-column dis">
                <div class="d-flex align-items-center justify-content-between mb-2" *ngIf="bien && bien?.reference">
                    <p>Reference du bien</p>
                    <p>{{bien?.reference}}</p>
                </div>
                <div class="d-flex align-items-center justify-content-between mb-2" *ngIf="bien?.statut && bien?.statut?.nom">
                    <p>Statut du bien</p>
                    <p>{{bien?.statut?.nom}}</p>
                </div>
                <div class="d-flex align-items-center justify-content-between mb-2" *ngIf="bien.typeImmo && bien.typeImmo.nom">
                    <p>Type du bien</p>
                    <p>{{bien.typeImmo.nom}}</p>
                </div>
                <div class="d-flex align-items-center justify-content-between mb-2" *ngIf="bien?.statut?.nom =='A louer'">
                    <p>Periode</p>
                    <p>{{bien.periode.nom}}</p>
                </div>
                <div class="d-flex align-items-center justify-content-between mb-2" *ngIf="bien?.adresse && bien?.adresse?.quartier">
                    <p>Quartier</p>
                    <p>{{bien?.adresse.quartier}}</p>
                </div>
                <div class="d-flex align-items-center justify-content-between mb-2" *ngIf="bien?.adresse && bien?.adresse?.rue">
                    <p>Rue</p>
                    <p>{{bien?.adresse.rue}}</p>
                </div>
                <div class="d-flex align-items-center justify-content-between mb-2" *ngIf="bien?.adresse && bien?.adresse?.porte">
                    <p>Porte</p>
                    <p>{{bien?.adresse.porte}}</p>
                </div>
                <div class="d-flex align-items-center justify-content-between mb-2" *ngIf="bien && bien?.createdAt">
                    <p>Date de publication</p>
                    <p>{{bien.createdAt | date:"dd/MM/yyyy"}}</p>
                </div>
                <div class="d-flex align-items-center justify-content-between mb-2" *ngIf="bien && bien?.nb_piece">
                    <p>Salon</p>
                    <p>{{bien.nb_piece}}</p>
                </div>
                <div class="d-flex align-items-center justify-content-between mb-2" *ngIf="bien && bien.chambre">
                    <p>Chambre</p>
                    <p>{{bien.chambre}}</p>
                </div>
                <div class="d-flex align-items-center justify-content-between mb-2" *ngIf="bien && bien.cuisine">
                    <p>Cuisine</p>
                    <p>{{bien.cuisine}}</p>
                </div>
                <div class="d-flex align-items-center justify-content-between mb-2" *ngIf="bien && bien.toilette">
                    <p>Toilette</p>
                    <p>{{bien.toilette}}</p>
                </div>
            </div>
        </div>
    </div>
    <div class="box-2">
        <div class="box-inner-2">
            <div>
                <p class="fw-bold">Detail du paiement</p>
                <p class="dis mb-3">Finalisez votre achat en fournissant vos coordonnées de paiement.</p>
            </div>

            <form action="">
                <div class="mb-3" *ngIf="bien?.periode?.nom === 'Journalier'">
                    <p class="dis fw-bold mb-2">Nombre de jour</p> 
                    <input type="number" class="form-control" min="0" name="nombreJourChoisi" max="29" [(ngModel)]="nombreJourChoisi" (input)="onNombreJourChange()">
                </div>
                <div class="mb-3" *ngIf="bien?.periode?.nom === 'Hebdomadaire'">
                    <p class="dis fw-bold mb-2">Nombre de semaine</p> 
                    <input type="number" class="form-control" min="0" max="5" name="nombreSemaineChoisi" [(ngModel)]="nombreSemaineChoisi" (input)="onNombreSemaineChange()">
                
                </div>
                <div>
                    <p class="dis fw-bold mb-2">Detail du paiement</p>
                    <div class="row">
                        <div class="col-md-12 mb-3" *ngIf="bien?.periode?.nom === 'Journalier'">
                            <div class="d-flex flex-column dis">
                                <div class="d-flex align-items-center justify-content-between mb-2">
                                    <p>Nombre de jour</p>
                                    <p>{{ nombreJourChoisi }} <span class="fw-bold">{{ nombreJourChoisi === 1 ? 'Jour' : 'Jours' }}</span></p>
                                </div>
                                <div class="d-flex align-items-center justify-content-between mb-2">
                                    <p>Prix journalier</p>
                                    <p>{{formatPrice(bien?.prix)}} <span class="fw-bold">FCFA</span></p>
                                </div>
                                <div class="d-flex align-items-center justify-content-between mb-2">
                                    <p class="fw-bold">Total</p>
                                    <p class="fw-bold">{{formatPrice(bien?.prix * nombreJourChoisi)}} <span class="fw-bold">FCFA</span></p>
                                </div>
                                <!-- <div class="btn btn-primary mt-2">Pay<span class="fas fa-dollar-sign px-1"></span>35.80
                                </div> -->
                            </div>
                        </div>
                        <div class="col-md-12 mb-3" *ngIf="bien?.periode?.nom === 'Hebdomadaire'">
                            <div class="d-flex flex-column dis">
                                <div class="d-flex align-items-center justify-content-between mb-2">
                                    <p>Nombre de semaine</p>
                                    <p>{{ nombreSemaineChoisi }} <span class="fw-bold">{{ nombreSemaineChoisi === 1 ? 'Semaine' : 'Semaines' }}</span></p>
                                </div>
                                <div class="d-flex align-items-center justify-content-between mb-2">
                                    <p>Prix Hebdomadaire</p>
                                    <p>{{formatPrice(bien?.prix)}} <span class="fw-bold">FCFA</span></p>
                                </div>
                                <div class="d-flex align-items-center justify-content-between mb-2">
                                    <p class="fw-bold">Total</p>
                                    <p class="fw-bold">{{formatPrice(bien?.prix * nombreSemaineChoisi)}} <span class="fw-bold">FCFA</span></p>
                                </div>
                                <!-- <div class="btn btn-primary mt-2">Pay<span class="fas fa-dollar-sign px-1"></span>35.80
                                </div> -->
                            </div>
                        </div>
                        <div class="col-md-12 mb-3" *ngIf="bien?.periode?.nom === 'Mensuel' && bien?.statut?.nom ==='A louer'">
                            <div class="d-flex flex-column dis">
                                <!-- <div class="d-flex align-items-center justify-content-between mb-2">
                                    <p>Nombre de mois</p>
                                    <p>{{ nombreMoisChoisi }} <span class="fw-bold" *ngIf="nombreMoisChoisi === 1">Mois</span><span class="fw-bold" *ngIf="nombreMoisChoisi !== 1">Mois</span></p>
                                </div> -->
                                <div class="d-flex align-items-center justify-content-between mb-2">
                                    <p>Avance</p>
                                    <p>{{bien?.avance}} <span class="fw-bold">Mois</span></p>
                                </div>
                                <div class="d-flex align-items-center justify-content-between mb-2">
                                    <p>Caution</p>
                                    <p>{{bien?.caution}} <span class="fw-bold">Mois</span></p>
                                </div>
                                <div class="d-flex align-items-center justify-content-between mb-2">
                                    <p>Prix mensuel</p>
                                    <p>{{formatPrice(bien?.prix)}} <span class="fw-bold">FCFA</span></p>
                                </div>
                                <div class="d-flex align-items-center justify-content-between mb-2">
                                    <p class="fw-bold">Total</p>
                                    <p class="fw-bold">{{formatPrice(bien?.prix * (bien?.avance + bien?.caution) )}}
                                        <span class="fw-bold">FCFA</span></p>
                                </div>
                                <!-- <div class="btn btn-primary mt-2">Pay<span class="fas fa-dollar-sign px-1"></span>35.80
                                </div> -->
                            </div>
                        </div>
                        <div class="col-md-12 mb-3" *ngIf="bien?.periode?.nom === 'Mensuel' && bien?.statut?.nom ==='A vendre'">
                            <div class="d-flex flex-column dis">
                                <div class="d-flex align-items-center justify-content-between mb-2">
                                    <p>Prix du bien</p>
                                    <p>{{formatPrice(bien?.prix)}} <span class="fw-bold">FCFA</span></p>
                                </div>
                                <div class="d-flex align-items-center justify-content-between mb-2">
                                    <p class="fw-bold">Total</p>
                                    <p class="fw-bold">{{formatPrice(bien?.prix)}}
                                        <span class="fw-bold">FCFA</span></p>
                                </div>
                                <!-- <div class="btn btn-primary mt-2">Pay<span class="fas fa-dollar-sign px-1"></span>35.80
                                </div> -->
                            </div>
                        </div>
                    </div>
                    <!-- <div class="d-flex align-items-center justify-content-between card-atm border rounded">
                        <div class="fab fa-cc-visa ps-3"></div> <input type="text" class="form-control" placeholder="Card Details">
                        <div class="d-flex w-50"> <input type="text" class="form-control px-0" placeholder="MM/YY">
                            <input type="password" maxlength=3 class="form-control px-0" placeholder="CVV"> </div>
                    </div> -->
                    <div class="my-3 cardname">
                        <p class="dis fw-bold mb-2">Mode de paiement</p> 
                        <p class="dis mb-2">Votre paiement sera effectué à travers le service <span class="fw-bold">Orange money</span>.</p>
                        <p class="dis mb-2">Merci de saisir votre numéro de téléphone pour continuer la transaction : </p>
                    <img src="../../../../assets/img/paiement/orange-money.jpg" alt="about">
                    </div>
                    <div class="address">
                        <!-- <p class="dis fw-bold mb-3">Billing address</p>
                        <select class="form-select" aria-label="Default select example"> <option selected hidden>United States</option> <option value="1">India</option> <option value="2">Australia</option> <option value="3">Canada</option> </select>
                        <div class="d-flex"> <input class="form-control zip" type="text" placeholder="ZIP"> <input class="form-control state" type="text" placeholder="State">
                        </div> -->
                        <div class=" my-3">
                            <p class="dis fw-bold mb-2">Numero de telephone</p>
                            <div class="inputWithcheck"> <input class="form-control" type="text" name="numeroPaiement" [(ngModel)]="paiementForm.numeroPaiement">
                                <!-- <span class="fas fa-check"></span> -->
                            </div>
                        </div>
                        <!-- <div class="my-3">
                            <p class="dis fw-bold mb-2">Discount Code</p> <input class="form-control text-uppercase" type="text" value="BLACKFRIDAY" id="discount">
                        </div> -->
                        <div class="d-flex flex-column dis">
                            <!-- <div class="d-flex align-items-center justify-content-between mb-2">
                                <p>Subtotal</p>
                                <p><span class="fas fa-dollar-sign"></span>19.00</p>
                            </div>
                            <div class="d-flex align-items-center justify-content-between mb-2">
                                <div class="d-flex align-items-center">
                                    <p class="pe-2">Discount
                                        <span class="d-inline-flex align-items-center justify-content-between bg-light px-2 couponCode"> <span id="code" class="pe-2"></span>
                                        <span class="fas fa-times close"></span> </span> </p>
                                </div>
                                <p><span class="fas fa-dollar-sign"></span>5.00</p>
                            </div>
                            <div class="d-flex align-items-center justify-content-between mb-2">
                                <p>VAT<span>(20%)</span></p>
                                <p><span class="fas fa-dollar-sign"></span>2.80</p>
                            </div>
                            <div class="d-flex align-items-center justify-content-between mb-2">
                                <p class="fw-bold">Total</p>
                                <p class="fw-bold"><span class="fas fa-dollar-sign"></span>16.80</p>
                            </div> -->
                            <div (click)="FairePaiement(facture?.id)" *ngIf="bien?.periode?.nom === 'Journalier'" style="background-color: #e98b11; color:white" class="btn mt-2">Confirmer
                                {{formatPrice(bien?.prix * nombreJourChoisi)}}<span class="px-1">
                                    FCFA</span>
                            </div>
                            <div (click)="FairePaiement(facture?.id)" *ngIf="bien?.periode?.nom === 'Hebdomadaire'" style="background-color: #e98b11; color:white" class="btn mt-2">Confirmer
                                {{formatPrice(bien?.prix * nombreSemaineChoisi)}}<span class="px-1">
                                    FCFA</span>
                            </div>
                            <div (click)="FairePaiement(facture?.id)" *ngIf="bien?.periode?.nom === 'Mensuel' && bien?.statut?.nom ==='A louer'" style="background-color: #e98b11; color:white" class="btn mt-2">Confirmer
                                {{formatPrice(bien?.prix * (bien?.avance + bien?.caution) )}}<span class="px-1">
                                    FCFA</span>
                            </div>
                            <div (click)="FairePaiement(facture?.id)" *ngIf="bien?.periode?.nom === 'Mensuel' && bien?.statut?.nom ==='A vendre'" style="background-color: #e98b11; color:white" class="btn mt-2">Confirmer
                                {{formatPrice(bien?.prix)}}<span class="px-1">
                                    FCFA</span>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>