<!-- Breadscrumb Section -->
<div class="breadcrumb-bar">
  <div class="container">
    <div class="row align-items-center text-center">
      <div class="col-md-12 col-12">
        <h2 class="breadcrumb-title">Details agence</h2>
        <nav aria-label="breadcrumb" class="page-breadcrumb">
          <ol class="breadcrumb">
            <li class="breadcrumb-item">
              <a [routerLink]="routes.home9">Accueil</a>
            </li>
            <li class="breadcrumb-item active" aria-current="page">{{agence?.nom}}</li>
          </ol>
        </nav>
      </div>
    </div>
  </div>
</div>
<!-- /Breadscrumb Section -->

<!-- Main Content Section -->
<div class="list-content">
  <div class="container">
    <div class="row">
      <div class="col-lg-4 theiaStickySidebar">
        <div class="stickybar">
          <div class="listings-sidebar">
            <div class="card user-card">
              <h4>
                <img style="width: 27px;" src="assets/img/details-icon.svg" alt="details-icon" />
                Details Agence
              </h4>
              <div class="card-block">
                <div class="user-image">
                  <img src="{{generateImageUrl(agence?.utilisateurPhoto?.nom)}}" class="img-radius" alt="User-Profile-Image"
                    (error)="handleAuthorImageError($event)">
                </div>
                <h6 class="f-w-600 m-t-25 m-b-10">{{agence?.nom}}</h6>
                <div class="row" *ngIf="agence && agence.email">
                  <div class="col-5" style="font-weight: bold;font-size: 14px">
                    <label>Email :</label>
                  </div>
                  <div class="col-7" style="font-size: 12px;">
                    <p>{{agence?.email}}</p>
                  </div>
                </div>
                <div class="row">
                  <div class="col-5" style="font-weight: bold;bold;font-size: 13px">
                    <label>Contact :</label>
                  </div>
                  <div class="col-7">
                    <p>{{agence?.telephone}}</p>
                  </div>
                </div>
                <hr>

                <p class="text-muted m-t-15">Taux d'activite: {{TauxActivite}}%</p>
                <ul class="list-unstyled activity-leval">
                  <li class="active"></li>
                  <li class="active"></li>
                  <li class="active"></li>
                  <li></li>
                  <li></li>
                </ul>
                <div class="bg-c-green counter-block m-t-10 p-20">
                  <div class="row">
                    <div class="col-4">
                      <i class="feather-home"></i>
                      <p>{{NombreBienAgence}}</p>
                    </div>
                    <div class="col-4">
                      <i class="feather-user"></i>
                      <p>{{NombreAgent}}</p>
                    </div>
                    <div class="col-4">
                      <i class="fas fa-thumbs-up"></i>
                      <p>{{totalLikes}}</p>
                    </div>
                  </div>
                </div>
                <div (click)="ContacterOrLogin(agence.id)">
                  <a class="btn btn-primartd mt-3"><i class="uil uil-filter"></i>
                    Contacter cette Agence</a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-lg-8" *ngIf="bienImmo && bienImmo.length > 0">
        <div class="row sorting-div">
          <!-- <div class="col-lg-4 col-sm-4 align-items-center d-flex">
            <div class="count-search">
              <p>Showing <span>1-8</span> of 10 Results</p>
            </div>
          </div> -->
          <div class="col-lg-8 col-sm-8 align-items-center">
            <div class="sortbyset">
              <span class="sortbytitle">Trier par</span>
              <div class="sorting-select">
                <select class="form-control select" [(ngModel)]="searchText">
                  <option value="" selected>Tout</option>
                  <option>A louer</option>
                  <option>A vendre</option>
                </select>
              </div>
            </div>
            <div class="grid-listview">
              <ul>
                <li>
                  <a [routerLink]="routes.listinglistsidebar" class="active">
                    <i class="feather-list"></i>
                  </a>
                </li>
                <!-- <li>
                  <a [routerLink]="routes.listinggridsidebar">
                    <i class="feather-grid"></i>
                  </a>
                </li> -->
              </ul>
            </div>
          </div>
        </div>
        <div class="blog-listview">
          <div class="card card2"
            *ngFor="let slide of bienImmo | filter:searchText | paginate:{itemsPerPage :3, currentPage:p}">
            <div class="blog-widget">
              <div class="blog-img">
                <a (click)="goToDettailBien(slide.id)">
                  <div *ngIf="slide.photos && slide.photos.length > 0; else noImages">
                    <img src="{{ generateImageUrl(slide.photos[0].nom) }}" class="img-fluid image-size"
                      alt="blog-img" />
                  </div>
                  <ng-template #noImages>
                    <img src="{{ DEFAULT_IMAGE_URL }}" class="img-fluid image-size" alt="default-img">
                  </ng-template>
                </a>
                <div class="fav-item">
                  <span [ngClass]="{'statutbien': slide.statut === 'A vendre' }" class="Featured-text">{{ slide.statut
                    }}</span>
                  <a href="javascript:void(0)" *ngIf="isLoggedIn == true " class="fav-icon"
                    (click)="AimerBien(slide.id)" [style.background-color]="favoriteStatus[slide.id] ? '#e98b11' : ''">
                    <i [style.color]="favoriteStatus[slide.id] ? 'white' : 'black'" class="feather-heart"></i>
                  </a>
                </div>
              </div>
              <div class="bloglist-content">
                <div class="card-body">
                  <div class="blogfeaturelink">
                    <div class="blog-features">
                      <a href="javascript:void(0);"><span>
                          <i class="fa-regular fa-circle-stop"></i>
                          {{ slide.typeImmo.nom }}</span></a>
                    </div>
                    <div class="blog-author">
                      <div class="blog-author-img">
                        <!-- <img [src]="slide.img2" alt="author" /> -->
                        <img src="{{generateImageUrl(slide.utilisateur.photo)}}" alt="author"
                          (error)="handleAuthorImageError($event)" />
                      </div>
                      <a (click)="goToDettailBien(slide.id)">{{ slide.utilisateur.nom}}</a>
                    </div>
                  </div>
                  <h6>
                    <a (click)="goToDettailBien(slide.id)">{{
                      slide.nom ? slide.nom : slide.typeImmo.nom
                      }}</a>
                  </h6>
                  <div class="blog-location-details">
                    <div class="location-info">
                      <i class="feather-map-pin"></i> {{ slide.adresse.quartier }}
                    </div>
                    <!-- <div class="location-info">
                      <i class="feather-phone-call"></i> 00556245562
                    </div> -->
                    <div class="location-info">
                      <i class="feather-eye"></i> {{ favoritedPropertiesCount1[slide.id] }}
                    </div>
                  </div>
                  <!-- <p class="ratings">
                    <span>4.0</span> ( 50 Reviews )
                  </p> -->
                  <div class="amount-details">
                    <div class="amount">
                      <span class="validrate">{{ formatPrice(slide.prix) }} FCFA </span>
                      <!-- <span>{{ slide.oldamount }}</span> -->
                    </div>
                    <a (click)="goToDettailBien(slide.id)">Savoir plus</a>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- PAGINATION  -->
          <pagination-controls *ngIf="bienImmo && bienImmo.length > 0" (pageChange)="p = $event"
            previousLabel="Précédent" nextLabel="Suivant" class="pagination" previousClass="pagination__previous"
            nextClass="pagination__next" containerClass="pagination__container" pageClass="pagination__page"
            activeClassName="pagination__page--active" disabledClass="pagination__page--disabled"></pagination-controls>
        </div>
      </div>
    </div>
    <div class="container mt-5 mb-5" *ngIf="agent && agent.length > 0">
      <h5 class="section-title h1">Ses agents</h5>
      <div class="listing-search">
        <div class="filter-content form-group">
          <div class="group-img">
            <input [(ngModel)]="searchTextAgent" type="text" class="form-control" placeholder="Recherche...">
            <i class="feather-search"></i>
          </div>
        </div>
        <div class="sorting-div">
          <div class="sortbyset">
            <span class="sortbytitle">Trier par</span>
            <div class="sorting-select">
              <select class="form-control select" [(ngModel)]="searchTextAgent">
                <option value="" selected>Tout</option>
                <option>Commune 1</option>
                <option>Commune 2</option>
                <option>Commune 3</option>
                <option>Commune 4</option>
                <option>Commune 5</option>
                <option>Commune 6</option>
              </select>
            </div>
          </div>
        </div>
      </div>
      <!-- <div class="d-flex justify-content-between mb-3"> <span>Doctors</span> <button class="btn btn-success add">Add Doctors</button> </div> -->
      <!-- <owl-carousel-o [options]="listingOwlOptions">
        <ng-container>
          <ng-template carouselSlide>
            <div class="row g-2">
              <div class="col-md-3">
                  <div class="card p-2 py-3 text-center card1">
                      <div class="img mb-2"> <img src="https://i.imgur.com/LohyFIN.jpg" width="70" class="rounded-circle"> </div>
                      <h5 class="mb-0">Patey Cruiser</h5> <small>Neurosurgeon</small>
                      <div class="ratings mt-2"> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fa fa-star"></i> </div>
                      <div class="mt-4 apointment"> <button class="btn btn-success text-uppercase">Book Appointment</button> </div>
                  </div>
              </div>
              <div class="col-md-3">
                  <div class="card p-2 py-3 text-center card1">
                      <div class="img mb-2"> <img src="https://i.imgur.com/o5uMfKo.jpg" width="70" class="rounded-circle"> </div>
                      <h5 class="mb-0">Mario Speedway</h5> <small>Cardiologist</small>
                      <div class="ratings mt-2"> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fa fa-star"></i> </div>
                      <div class="mt-4 apointment"> <button class="btn btn-success text-uppercase">Book Appointment</button> </div>
                  </div>
              </div>
              <div class="col-md-3">
                  <div class="card p-2 py-3 text-center card1">
                      <div class="img mb-2"> <img src="https://i.imgur.com/tmdHXOY.jpg" width="70" class="rounded-circle "> </div>
                      <h5 class="mb-0">Anna Sthesia</h5> <small>Surgeon</small>
                      <div class="ratings mt-2"> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fa fa-star"></i> </div>
                      <div class="mt-4 apointment"> <button class="btn btn-success text-uppercase">Book Appointment</button> </div>
                  </div>
              </div>
              <div class="col-md-3">
                  <div class="card p-2 py-3 text-center card1">
                      <div class="img mb-2"> <img src="https://i.imgur.com/C4egmYM.jpg" width="70" class="rounded-circle"> </div>
                      <h5 class="mb-0">Paul Moliv</h5> <small>Dentist</small>
                      <div class="ratings mt-2"> <i class="fa fa-star"></i> <i class="fa fa-star"></i> </div>
                      <div class="mt-4 apointment"> <button class="btn btn-success text-uppercase">Book Appointment</button> </div>
                  </div>
              </div>
          </div>
          </ng-template>
        </ng-container>
      </owl-carousel-o> -->

      <!-- <div class="row g-2">
        <div class="col-md-3" *ngFor="let Agent of agent | filter : searchTextAgent">
          <div class="card p-2 py-3 text-center card1">
            <div class="img mb-2" *ngIf="Agent"> <img src="{{generateImageUrl(Agent.photo)}}"
                (error)="handleAuthorImageError($event)" width="70" class="rounded-circle"> </div>
            <h5 class="mb-0">{{Agent.username}}</h5>
            <small style="margin-top: 8px !important;"
              *ngIf="Agent.adresse && Agent.adresse.length > 0; else noAddress">
              {{ Agent.adresse[0]?.nom }}
            </small>
            <ng-template #noAddress>
              <small style="margin-top: 8px !important;">Pas d'adresse</small>
            </ng-template>

            <div class="ratings mt-2"> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fa fa-star"></i>
              <i class="fa fa-star"></i>
            </div>
            <div class="mt-4 apointment">
              <div (click)="goToDettailAgent(Agent.id)">
                <a class="btn btn-primartd"><i class="uil uil-filter"></i>
                  Savoir plus</a>
               
              </div>
            </div>
          </div>

        </div>
      </div> -->

      <div class="row g-2">
        <div class="col-lg-12 aos" data-aos="fade-up">
          <div class="car-class-carousel">
            <div class=" blog-slider">
              <owl-carousel-o [options]="recentarticleOwlOptions">
                <ng-container *ngFor="let Agent of agent | filter : searchTextAgent">
                  <ng-template carouselSlide>
                    <div class="card p-2 py-3 text-center card1">
                      <div class=" mb-2 image-sizeagent" *ngIf="Agent">
                        <img src="{{generateImageUrl(Agent.photo)}}" (error)="handleAuthorImageError($event)" width="70"
                          class="">
                      </div>
                      <h5 class="mb-0">{{Agent.username}}</h5>
                      <small style="margin-top: 8px !important;"
                        *ngIf="Agent.adresse && Agent.adresse.length > 0; else noAddress">
                        {{ Agent.adresse[0]?.nom }}
                      </small>
                      <ng-template #noAddress>
                        <small style="margin-top: 8px !important;">Pas d'adresse</small>
                      </ng-template>

                      <div class="ratings mt-2"> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i
                          class="fa fa-star"></i>
                        <i class="fa fa-star"></i>
                      </div>
                      <div class="mt-4 apointment">
                        <div (click)="goToDettailAgent(Agent.id)">
                          <a class="btn btn-primartd"><i class="uil uil-filter"></i>
                            Savoir plus</a>

                        </div>
                      </div>
                    </div>
                  </ng-template>
                </ng-container>
              </owl-carousel-o>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>
  <!-- /Main Content Section -->