<!-- Breadscrumb Section -->
<!--<div class="breadcrumb-bar">
  <div class="container">
    <div class="row align-items-center text-center">
      <div class="col-md-12 col-12">
        <h2 class="breadcrumb-title">Creer votre compte</h2>
        <nav aria-label="breadcrumb" class="page-breadcrumb">
          <ol class="breadcrumb">
            <li class="breadcrumb-item"><a [routerLink]="routes.home9">Accueil</a></li>
            <li class="breadcrumb-item active" aria-current="page">Inscription</li>
          </ol>
        </nav>
      </div>
    </div>
  </div>
</div>-->
<!-- /Breadscrumb Section -->

<!-- Login Section -->
<div class="login-content" style="margin-top: 40px">
  <div class="container">
    <div class="row">
      <div class="col-md-6 col-lg-5 mx-auto">
        <div class="login-wrap register-form">
          <div class="login-header">
            <h3>Creation d'un compte</h3>
            <p>Commençons avec <span>Sossara</span></p>
          </div>

          <!-- Signup Form -->
          <form (ngSubmit)="f.form.valid && onSubmit()" #f="ngForm" name="form">
            <!-- <div class="row">
              <div class="col">
                <div class="form-group group-img">
                  <div class="group-img">
                    <i class="feather-user"></i>
                    <input type="text" class="form-control" placeholder="Nom" />
                  </div>
                </div>
              </div>
              <div class="col">
                <div class="form-group group-img">
                  <div class="group-img">
                    <i class="feather-user"></i>
                    <input
                      type="text"
                      class="form-control"
                      placeholder="Prenom"
                    />
                  </div>
                </div>
              </div>
            </div> -->
            <div class="form-group group-img">
              <div class="group-img" id="datepicker">
                <i class="feather-user"></i>
                <input
                  placeholder="Prenom et Nom"
                  name="nom"
                  type="text"
                  class="form-control"
                  [(ngModel)]="form.nom"
                  required
                />
              </div>
            </div>
            <div class="form-group group-img">
              <div class="group-img">
                <i class="feather-mail"></i>
                <input
                  type="email"
                  placeholder="Adresse Email"
                  name="email"
                  required
                  class="form-control"
                  [(ngModel)]="form.email"
                />
              </div>
            </div>
            <!-- <div class="form-group group-img">
              <div class="group-img">
                <i class="feather-user"></i>
                <input
                  [(ngModel)]="form.password"
                  type="password"
                  class="form-control"
                  placeholder="Mot de passe"
                  required
                  name="password"
                />
              </div>
            </div> -->
            <div class="form-group group-img">
              <div class="group-img">
                <i class="feather-phone"></i>
                <input
                  [(ngModel)]="form.telephone"
                  type="text"
                  required
                  name="telephone"
                  class="form-control"
                  placeholder="Numero de Telephone"
                />
              </div>
            </div>
            <div class="form-group group-img">
              <div class="group-img">
                <i class="feather-calendar"></i> <!-- Utilisation d'une icône de calendrier pour représenter la date de naissance -->
                <input
                  [(ngModel)]="form.dateNaissance" 
                  type="date" 
                  required
                  name="dateNaissance"
                  class="form-control"
                  placeholder="Date de Naissance"
                />
              </div>
            </div>
            <div class="form-group group-img">
              <div class="group-img">
                <select class="form-control" (change)="onChange($event.target)" [(ngModel)]="form.roles"
                name="roles">
                  <option *ngFor="let item of typeUser" [value]="item">
                    {{ item }}
                  </option>
                </select>
              </div>
            </div>
            <div class="form-group group-img"
              *ngIf="currentUser != 'Utilisateur'"
            >
              <div class="group-img">
                <select class="form-control" (change)="onTypePiecesChange($event)" [(ngModel)]="form.nom_doc"
                name="nom_doc">
                  <option *ngFor="let item of typePieces" [value]="item">
                    {{ item }}
                  </option>
                </select>
              </div>
            </div>
            <!-- Debut Visiteur et proprietaire -->
            <div class="row" *ngIf="selectedTypePiece === 'NINA'">
              <div class="col">
                <div class="form-group group-img">
                  <div class="group-img">
                    <i class="feather-user"></i>
                    <input
                      type="number"
                      [(ngModel)]="form.num_doc"
                      name="num_doc"
                      pattern="[0-9]{14}"
                      class="form-control"
                      placeholder="N du NINA"
                    />
                  </div>
                </div>
              </div>
              <div class="col">
                <div class="form-group group-img">
                  <div class="settings-upload-btn">
                    <input
                      type="file"
                      id="photo" name="photo"
                      (change)="onFileSelected($event)"
                      class="hide-input image-upload"
                    />
                    <label for="file" class="file-upload">Photo de la carte</label>
                  </div>
                </div>
              </div>
            </div>
            <div class="row" *ngIf="selectedTypePiece === 'CarteIN'">
              <div class="col">
                <div class="form-group group-img">
                  <div class="group-img">
                    <i class="feather-user"></i>
                    <input
                      type="text"
                      [(ngModel)]="form.num_doc"
                      pattern="[0-9]+"
                      maxlength="7"
                      name="num_doc"
                      class="form-control"
                      placeholder="N de la carte"
                    />
                  </div>
                </div>
              </div>
              <div class="col">
                <div class="form-group group-img">
                  <div class="settings-upload-btn">
                    <input
                      type="file"
                      id="photo" name="photo"
                      (change)="onFileSelected($event)"
                      class="hide-input image-upload"
                    />
                    <label for="file" class="file-upload">Photo de la carte</label>
                  </div>
                </div>
              </div>
            </div>
            <div class="row" *ngIf="selectedTypePiece === 'Passport'">
              <div class="col">
                <div class="form-group group-img">
                  <div class="group-img">
                    <i class="feather-user"></i>
                    <input
                      type="text"
                      [(ngModel)]="form.num_doc"
                      name="num_doc"
                      pattern="[A-Za-z]{2}[0-9]+"
                      maxlength="9"
                      class="form-control"
                      placeholder="N du Passport"
                    />
                  </div>
                </div>
              </div>
              <div class="col">
                <div class="form-group group-img">
                  <div class="settings-upload-btn">
                    <input
                      type="file"
                      id="photo" name="photo"
                      (change)="onFileSelected($event)"
                      class="hide-input image-upload"
                    />
                    <label for="file" class="file-upload">Photo du Passport</label>
                  </div>
                </div>
              </div>
            </div>
            <!-- Fin Visiteur et proprietaire -->

            <!-- Debut Agence -->
            <div class="row" *ngIf="selectedTypePiece === 'RCCM'">
              <div class="col">
                <div class="form-group group-img">
                  <div class="group-img">
                    <i class="feather-user"></i>
                    <input
                      type="text"
                      [(ngModel)]="form.num_doc"
                      name="num_doc"
                      class="form-control"
                      placeholder="N du RCCM"
                    />
                  </div>
                </div>
              </div>
              <div class="col">
                <div class="form-group group-img">
                  <div class="settings-upload-btn">
                    <input
                      type="file"
                      id="photo" name="photo"
                      (change)="onFileSelected($event)"
                      class="hide-input image-upload"
                    />
                    <label for="file" class="file-upload">Photo de RCCM</label>
                  </div>
                </div>
              </div>
            </div>
            <div class="row" *ngIf="selectedTypePiece === 'NIF'">
              <div class="col">
                <div class="form-group group-img">
                  <div class="group-img">
                    <i class="feather-user"></i>
                    <input
                      type="text"
                      [(ngModel)]="form.num_doc"
                      name="num_doc"
                      class="form-control"
                      placeholder="N du NIF"
                    />
                  </div>
                </div>
              </div>
              <div class="col">
                <div class="form-group group-img">
                  <div class="settings-upload-btn">
                    <input
                      type="file"
                      id="photo" name="photo"
                      (change)="onFileSelected($event)"
                      class="hide-input image-upload"
                    />
                    <label for="file" class="file-upload">Photo du NIF</label>
                  </div>
                </div>
              </div>
            </div>
            <!-- Fin Agence -->

            <!-- Debut Mot de passe et confirmation -->
            <div class="row">
              <div class="col">
                <div class="form-group">
                  <div class="pass-group group-img">
                    <i class="feather-lock"></i>
                    <input
                      type="password"
                      [(ngModel)]="form.password"
                      name="password"
                      [type]="Toggledata ? 'password' : 'text'"
                      class="form-control pass-input"
                      placeholder="Mot de passe"
                    />
                    <span
                      [ngClass]="
                        Toggledata == true
                          ? 'toggle-password feather-eye-off'
                          : 'toggle-password feather-eye'
                      "
                      (click)="iconLogle()"
                    ></span>
                  </div>
                </div>
              </div>
              <div class="col">
                <div class="form-group">
                  <div class="pass-group group-img">
                    <i class="feather-lock"></i>
                    <input
                      type="password"
                      name="password"
                      [type]="ToggledataC ? 'password' : 'text'"
                      class="form-control pass-input"
                      [(ngModel)]="form.confirmPassword"
                      placeholder="Confirmer Mot de passe"
                    />
                    <span
                      [ngClass]="
                        ToggledataC == true
                          ? 'toggle-password feather-eye-off'
                          : 'toggle-password feather-eye'
                      "
                      (click)="iconLogleC()"
                    ></span>
                  </div>
                </div>
              </div>
            </div>
            <!-- Fin Mot de passe et confirmation -->
            <!-- <div *ngIf="!passwordsMatch()" class="text-danger">
              Les mots de passe ne correspondent pas.
            </div> -->
            <div *ngIf="isSignUpFailed" class="alert alert-danger" role="">
              {{ errorMessage }}
            </div>
            <button class="btn btn-primary w-100 login-btn" type="submit">
              Creer un compte
            </button>
            <div class="register-link text-center">
              <p>
                Vous avez déjà un compte?
                <a class="forgot-link" [routerLink]="routes.login"
                  >S'identifier</a
                >
              </p>
            </div>
            <!-- <div class="login-or">
              <span class="or-line"></span>
              <span class="span-or">Sign in with Social Media Accounts</span>
            </div>
            <div class="social-login">
              <a href="#" class="btn btn-apple w-100"><img src="assets/img/apple.svg" class="me-1" alt="img" />Sign
                in with Apple</a>
            </div>
            <div class="social-login">
              <a href="#" class="btn btn-google w-100"><img src="assets/img/google.svg" class="me-1" alt="img" />Sign
                in with Google</a>
            </div>
            <div class="social-login">
              <a href="#" class="btn btn-facebook w-100 mb-0"><img src="assets/img/facebook.svg" class="me-2"
                  alt="img" />Continue with Facebook</a>
            </div>-->
          </form>
          <!-- /Login Form -->
        </div>
      </div>
    </div>
  </div>
</div>
<!-- /Login Section -->
<script>
  function formatInputWithSeparators(input) {
    // Supprimer les caractères non numériques
    let numericValue = input.value.replace(/\D/g, '');
    
    // Formater avec des séparateurs
    let formattedValue = numericValue
      .split('')
      .map((char, index) => (index > 0 && index % 1 === 0 ? ' . ' : '') + char)
      .join('');
    
    input.value = formattedValue;
  }
  </script>